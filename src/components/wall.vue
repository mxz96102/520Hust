<template>
  <div class="wall">
      <div @click="change" class="wall-left">
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 120 300" style="enable-background:new 0 0 120 300;" xml:space="preserve">
<path id="XMLID_25_" class="st0" d="M102.8,76.6c0.4,14.4-11.3,20.5-11.3,20.5l0,0c1.5-4.2,1.6-8.2,0.3-11c-4.3-9.4-23.8-7.6-26,5.1
	c-2.2,12.7,12.6,11.9,12.6,11.9s-20.6,12.6-24.4-1.8c-3.7-13.9,4-22.7,4.6-23.3c0,0,0,0,0,0l0,0h0c1.3-1.4,2.5-2.8,3.6-4.4
	C77,68,87.2,59,89.9,55.4c3.9-5.2-2.2-9.1-2.2-9.1s-3.7,7.6-18,13.6c1-2.6,1.8-5.3,2.6-8.2c0.2-0.9,0.4-1.8,0.6-2.7
	c2.4-1.1,4.3-2.2,5.3-3.2c3.1-3.1,1-5.1,1-5.1c-1.8,0.9-3.6,1.7-5.3,2.4c0.4-2.6,0.7-5.4,0.9-8.1c4.9-1.6,8.7-3.5,10.5-4.9
	c4.7-3.6,1-6,1-6c-4.1,1.6-7.8,2.7-11.3,3.6C75,18.1,73.4,9.2,69.2,4.2c-8-9.6-15.8,1.5-15.8,1.5s4.7,9.8,6.3,23.5
	c-11.6-0.5-17-5.2-17-5.2s-3,0.5-4.6,4.1c-1.6,3.5,0.6,8.2,9,9.7c4.3,0.7,8.8,0.8,13.1,0.3c0,2.7-0.2,5.5-0.5,8.4
	c-9.4,0.8-14.8-1.9-14.8-1.9s-2.7,2.4-2.7,4.3c0,1.9,1.7,5.6,10.1,5.5c1.9,0,4-0.3,6.1-0.7c-0.8,3.3-1.9,6.7-3.4,10.1
	c-16.5,1.2-34.4-5.3-34.4-5.3s-5,3-5,6.9c0,3.9-0.3,13.4,25.4,12.6c1.8-0.1,3.6-0.2,5.4-0.4c-8.3,9.9-21.2,19-40.8,25.6
	c0,0,18.7-3.7,34.8-11.8c2.2-1.1,4.2-2.2,6.2-3.4c-1.6,9-2.4,26.4,14.6,28.3c13,1.4,22.5-5.3,27.5-13.1c0,0,17.8-3.3,21.7-14.4
	C114.3,77.6,102.8,76.6,102.8,76.6z M83.7,97.1c0,0-7.1,2.8-9.2-3.2c-1.8-5.1,5.3-8.6,9.2-4.9C87.6,92.8,83.7,97.1,83.7,97.1z"/>
<path id="XMLID_21_" class="st0" d="M82.4,155.9c0,0-21.8,6.1-36.6,1.8c0,0,14.3-0.5,19.1-10.6c4.5-9.5-1.1-14.4-3-15.3
	c-1.9-1-9.7-2.9-11.2,4c0,0,9.9,7.8,2,14.4c-8.5,7.1-14.4,6.9-14.4,6.9s-10.1,15,5.5,34.1c0,0,22.6,6.8,34.9-2.2
	C78.6,189,91.3,171.6,82.4,155.9z M69.3,186.2c0,0-11.1,2.2-19.2-0.3c0,0-3-1.5-3.9-5.9c0,0,20.8,2.8,28.6-1.9
	C74.8,178.1,73.3,183.9,69.3,186.2z M75.7,172.3C65.5,177,45,174.5,45,174.5c-1.8-4.9-0.2-8.5-0.2-8.5c13.5,3.8,30.8-1.1,30.8-1.1
	C77.4,167.8,75.7,172.3,75.7,172.3z"/>
<g id="XMLID_5_">
	<path id="XMLID_18_" class="st0" d="M55.5,267.6c18.7-1.1,34.4-8.3,41.5-14.1c7.2-5.8,3.5-11.5,3.5-11.5c-2.7,2.5-5.8,4.6-9.1,6.4
		c1.4-1.5,2.4-3.4,2.9-5.6c1.8-8.6-4.7-10.1-8.1-7.2c0,0,2.3,9.7-2,16c-3.5,1.4-7,2.4-10.5,3.3c2.4-4.9,6.1-13.9,7.2-23.2
		c7.1-2.8,11.9-5.8,13.1-7c2.2-2-1.1-3.2-1.1-3.2c-3.2,2.3-7.3,3.9-11.8,4.9c0-3.6-0.6-7.2-1.9-10.6c-4.8-12.2-16.2-2.7-16.2-2.7
		s5.6,3.1,8.4,12.3c0.2,0.7,0.4,1.5,0.6,2.3c-12.1,1-23.7-0.7-23.7-0.7s-2.7,1.9-3,4.8c-0.3,2.5,0.1,7.2,14.2,5.4
		c4.9-0.6,9.4-1.6,13.6-2.8c0.7,7.6,0.2,16.2-2.1,21.2c-1.8,0.4-3.6,0.8-5.3,1.1c0.8-3.7,1.8-11.5-3.1-14.9
		c-6.6-4.5-8.1,4.5-8.1,4.5s8.5,3,10.3,10.5c-11.7,2-21,1.9-21,1.9s-0.5,3.6,2.1,6.3c-2.5,2.6-5.5,4.7-8.5,6.3c1.3-3.9,3-9.8,4-15.9
		c5.6-4.6,9.1-9.9,9.1-9.9c-2.9,1.5-5.8,2.7-8.4,3.7c0.4-6.2-0.4-12.2-3.6-16.2c-5.4-5.2-11.6,3.4-11.6,3.4s6.9,4.3,7.4,15.2
		c-6.7,1.7-11,1.7-11,1.7c-0.9,2.8-1,10.8,8.6,7.6c0.8-0.3,1.5-0.5,2.2-0.9c-0.3,5.6-0.9,10.5-1.3,13.4c-8.9,3.5-17.2,3.8-17.2,3.8
		s-3.5,13.1,11.5,11.7c10.1-0.9,17.1-14.1,20.6-22.6C49.4,267.2,51.9,267.8,55.5,267.6z"/>
	<path id="XMLID_13_" class="st0" d="M49,273.5c0,0-0.2,13,6.8,23.8c0,0,20.6,4.7,36.8-6.5c0,0,7.3-12.7,5.5-31
		C98.1,259.9,71.9,279.2,49,273.5z M83.8,289.1c-8.6,6-19.7,3.5-19.7,3.5c-3.7-5.8-3.6-12.7-3.6-12.7c12.2,3,26.2-7.3,26.2-7.3
		C87.7,282.3,83.8,289.1,83.8,289.1z"/>
	<path id="XMLID_6_" class="st0" d="M68.1,283.8c0,0-0.1,2.9,1.5,5.4c0,0,4.7,1.1,8.3-1.5c0,0,1.6-2.9,1.2-7
		C79.2,280.7,73.3,285,68.1,283.8z"/>
</g>
<path id="XMLID_12_" class="st1" d="M106,78.5C106.4,92.9,94.7,99,94.7,99l0,0c1.5-4.2,1.6-8.2,0.3-11c-4.3-9.4-23.8-7.6-26,5.1
	C66.8,105.7,81.6,105,81.6,105s-20.6,12.6-24.4-1.8c-3.7-13.9,4-22.7,4.6-23.3c0,0,0,0,0,0l0,0h0c1.3-1.4,2.5-2.8,3.6-4.4
	C80.2,70,90.4,60.9,93.1,57.3c3.9-5.2-2.2-9.1-2.2-9.1s-3.7,7.6-18,13.6c1-2.6,1.8-5.3,2.6-8.2c0.2-0.9,0.4-1.8,0.6-2.7
	c2.4-1.1,4.3-2.2,5.3-3.2c3.1-3.1,1-5.1,1-5.1c-1.8,0.9-3.6,1.7-5.3,2.4c0.4-2.6,0.7-5.4,0.9-8.1c4.9-1.6,8.7-3.5,10.5-4.9
	c4.7-3.6,1-6,1-6c-4.1,1.6-7.8,2.7-11.3,3.6c-0.1-9.4-1.7-18.3-5.9-23.3c-8-9.6-15.8,1.5-15.8,1.5s4.7,9.8,6.3,23.5
	c-11.6-0.5-17-5.2-17-5.2s-3,0.5-4.6,4.1c-1.6,3.5,0.6,8.2,9,9.7c4.3,0.7,8.8,0.8,13.1,0.3c0,2.7-0.2,5.5-0.5,8.4
	C53.5,49.1,48,46.4,48,46.4s-2.7,2.4-2.7,4.3c0,1.9,1.7,5.6,10.1,5.5c1.9,0,4-0.3,6.1-0.7c-0.8,3.3-1.9,6.7-3.4,10.1
	c-16.5,1.2-34.4-5.3-34.4-5.3s-5,3-5,6.9c0,3.9-0.3,13.4,25.4,12.6c1.8-0.1,3.6-0.2,5.4-0.4c-8.3,9.9-21.2,19-40.8,25.6
	c0,0,18.7-3.7,34.8-11.8c2.2-1.1,4.2-2.2,6.2-3.4c-1.6,9-2.4,26.4,14.6,28.3c13,1.4,22.5-5.3,27.5-13.1c0,0,17.8-3.3,21.7-14.4
	C117.5,79.5,106,78.5,106,78.5z M86.9,99c0,0-7.1,2.8-9.2-3.2c-1.8-5.1,5.3-8.6,9.2-4.9C90.8,94.7,86.9,99,86.9,99z"/>
<path id="XMLID_10_" class="st1" d="M85.6,157.8c0,0-21.8,6.1-36.6,1.8c0,0,14.3-0.5,19.1-10.6c4.5-9.5-1.1-14.4-3-15.3
	s-9.7-2.9-11.2,4c0,0,9.9,7.8,2,14.4c-8.5,7.1-14.4,6.9-14.4,6.9s-10.1,15,5.5,34.1c0,0,22.6,6.8,34.9-2.2
	C81.8,190.9,94.5,173.5,85.6,157.8z M72.5,188.1c0,0-11.1,2.2-19.2-0.3c0,0-3-1.5-3.9-5.9c0,0,20.8,2.8,28.6-1.9
	C78,180,76.5,185.9,72.5,188.1z M78.9,174.2c-10.2,4.7-30.7,2.2-30.7,2.2c-1.8-4.9-0.2-8.5-0.2-8.5c13.5,3.8,30.8-1.1,30.8-1.1
	C80.6,169.8,78.9,174.2,78.9,174.2z"/>
<g id="XMLID_1_">
	<path id="XMLID_2_" class="st1" d="M58.4,269.5c18.7-1.1,34.4-8.3,41.5-14.1c7.2-5.8,3.5-11.5,3.5-11.5c-2.7,2.5-5.8,4.6-9.1,6.4
		c1.4-1.5,2.4-3.4,2.9-5.6c1.8-8.6-4.7-10.1-8.1-7.2c0,0,2.3,9.7-2,16c-3.5,1.4-7,2.4-10.5,3.3c2.4-4.9,6.1-13.9,7.2-23.2
		c7.1-2.8,11.9-5.8,13.1-7c2.2-2-1.1-3.2-1.1-3.2c-3.2,2.3-7.3,3.9-11.8,4.9c0-3.6-0.6-7.2-1.9-10.6c-4.8-12.2-16.2-2.7-16.2-2.7
		s5.6,3.1,8.4,12.3c0.2,0.7,0.4,1.5,0.6,2.3c-12.1,1-23.7-0.7-23.7-0.7s-2.7,1.9-3,4.8c-0.3,2.5,0.1,7.2,14.2,5.4
		c4.9-0.6,9.4-1.6,13.6-2.8c0.7,7.6,0.2,16.2-2.1,21.2c-1.8,0.4-3.6,0.8-5.3,1.1c0.8-3.7,1.8-11.5-3.1-14.9
		c-6.6-4.5-8.1,4.5-8.1,4.5s8.5,3,10.3,10.5c-11.7,2-21,1.9-21,1.9s-0.5,3.6,2.1,6.3c-2.5,2.6-5.5,4.7-8.5,6.3c1.3-3.9,3-9.8,4-15.9
		c5.6-4.6,9.1-9.9,9.1-9.9c-2.9,1.5-5.8,2.7-8.4,3.7c0.4-6.2-0.4-12.2-3.6-16.2c-5.4-5.2-11.6,3.4-11.6,3.4s6.9,4.3,7.4,15.2
		c-6.7,1.7-11,1.7-11,1.7c-0.9,2.8-1,10.8,8.6,7.6c0.8-0.3,1.5-0.5,2.2-0.9c-0.3,5.6-0.9,10.5-1.3,13.4c-8.9,3.5-17.2,3.8-17.2,3.8
		S15,292.2,30,290.8c10.1-0.9,17.1-14.1,20.6-22.6C52.3,269.2,54.8,269.7,58.4,269.5z"/>
	<path id="XMLID_19_" class="st1" d="M51.9,275.5c0,0-0.2,13,6.8,23.8c0,0,20.6,4.7,36.8-6.5c0,0,7.3-12.7,5.5-31
		C101,261.8,74.8,281.1,51.9,275.5z M86.7,291c-8.6,6-19.7,3.5-19.7,3.5c-3.7-5.8-3.6-12.7-3.6-12.7c12.2,3,26.2-7.3,26.2-7.3
		C90.6,284.2,86.7,291,86.7,291z"/>
	<path id="XMLID_20_" class="st1" d="M71,285.7c0,0-0.1,2.9,1.5,5.4c0,0,4.7,1.1,8.3-1.5c0,0,1.6-2.9,1.2-7
		C82.1,282.6,76.2,286.9,71,285.7z"/>
</g>
</svg>
          <div class="info-net">上墙：520.mingdom.cn</div>
          <img src="../assets/2dm.png" style="width: 100%" alt="">
      </div>
      <div class="wall-right">
          <ul class="info-list ">
              <li class="animated" :class="{'fadeOutUp' : isOut0 , 'fadeInUp' : isIn0,'special': item[0].create_time == '5-20 13:14'}">
                  <div class="info-all">
                      <div class="info-left">
                          <span>{{item[0].name}}</span><br/>
                      </div>
                      <div class="info-right">
                          <span class="time">{{item[0].create_time}}</span>
                      </div>
                  </div>
                  <p class="info-content" :class="{'small' : item[0].text.length>150,'big' : item[0].text.length<50}">
                      {{item[0].text}}
                  </p>
              </li>
              <li class="animated" :class="{'fadeOutUp' : isOut1 , 'fadeInUp' : isIn1,'special': item[1].create_time == '5-20 13:14'}">
                  <div class="info-all">
                      <div class="info-left">
                          <span>{{item[1].name}}</span><br/>
                      </div>
                      <div class="info-right">
                          <span class="time">{{item[1].create_time}}</span>
                      </div>
                  </div>
                  <p class="info-content" :class="{'small' : item[1].text.length>150,'big' : item[1].text.length<50}">
                      {{item[1].text}}
                  </p>
              </li>
              <li class="animated" :class="{'fadeOutUp' : isOut2 , 'fadeInUp' : isIn2,'special': item[2].create_time == '5-20 13:14'}">
                  <div class="info-all">
                      <div class="info-left">
                          <span>{{item[2].name}}</span><br/>
                      </div>
                      <div class="info-right">
                          <span class="time">{{item[2].create_time}}</span>
                      </div>
                  </div>
                  <p class="info-content" :class="{'small' : item[2].text.length>150,'big' : item[2].text.length<50}">
                      {{item[2].text}}
                  </p>
              </li>
          </ul>
      </div>
  </div>
</template>

<script>
import "../assets/animate.css"

export default {
  name: 'wall',
  data () {
    return {
      isOut0 : false,
      isOut1 : false,
      isOut2 : false,
      isIn0 : false,
      isIn1 : false,
      isIn2 : false,
      id : 0,
      offset : 1,
      item:[{text:""},{text:""},{text:""}]
    }
  },
    mounted(){
      let ws = new WebSocket('ws://520.mingdom.cn/api/wall/message'),__this = this;

      ws.onopen=function (e) {
        setInterval(()=>{ws.send('{"id": 1,"action": "query","body": {"offset": "'+__this.offset+'","limit": "3"}}')
        },6000)

        ws.send('{"id": 1,"action": "query","body": {"offset": "'+__this.offset+'","limit": "3"}}')

        ws.onmessage = function(event) {
          let re = JSON.parse(event.data);
          console.log(re)
          __this.offset = parseInt(re.body.offset)
          setTimeout(()=>{__this.isOut0=true; __this.isIn0=false},1)
          setTimeout(()=>{__this.isOut1=true; __this.isIn1=false},201)
          setTimeout(()=>{__this.isOut2=true; __this.isIn2=false},401)
          setTimeout(()=>{__this.item = re.body.data;__this.isOut0=false; __this.isIn0=true},1500)
          setTimeout(()=>{__this.isOut1=false; __this.isIn1=true},1700)
          setTimeout(()=>{__this.isOut2=false; __this.isIn2=true},1900)
        };
      }
    },
  methods:{
    change(){
      let __this = this;


    }
  }
}
</script>

<style scoped>
    .wall .info-list li{
        margin-bottom: 1rem;
        height: 25vh;
        background: white;
    }

    .wall{
        font-size: 12px;
        background: #ffe9e9;
        height: 100vh;
    }
   .wall .info-content{
       font-size: 12px;
    }

    .wall .info-content.big{
        font-size: 16px;
    }

    .wall .info-content.small{
        font-size: 9px;
    }

    .wall .info-net{
        color: #FF8181;
        text-align: center;
    }

    .wall .info-all{
        font-size: 12px;
        height: 1.5rem;
    }
    .st0{fill:#87CEFF;}
    .st1{fill:#FFA4A4;}
    .wall-left{
        width: 14%;
        margin-left: 1%;
        margin-right: 2%;
        position: fixed;
    }
    .wall-right{
        width: 70%;
        margin-left: 20%;
    }
    .wall-right .special{
        background-size: auto 100%;
        background-position-x: 30%;
    }
    .wall-right .info-list{
        width: 100%;
    }
    .wall-right .info-list li{
        width: 100%;
    }
    .info-right .time{
        color: #999;
    }
    .info-left {
        font-size: 1.2em;
    }
</style>
